layout: false
---
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noindex">
    <title>スペクトラムアナライザー</title>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.11.1/dist/cdn.min.js"></script>
    <script src="spectrum-analyzer.js"></script>
    <style>
      .mycanvas {
        border:1px solid gray;
        border-radius:4px;
        margin:0;
        width:100%;
        height:300px;
      }
    </style>
  </head>
  <body>
    <div x-data="initialData" style="position:relative; padding:8px">
      <div style="display:flex; width:100%; flex-wrap:wrap">
        <table>
          <tbody>
            <tr><td>最大デシベル</td><td>
              <input x-model="maxDecibels" type="range" min="-100" max="0" step="1" />
              <span x-text="maxDecibels"></span>
            </td></tr>

            <tr><td>最小デシベル</td><td>
              <input x-model="minDecibels" type="range" min="-100" max="0" step="1" />
              <span x-text="minDecibels"></span>
            </td></tr>

            <tr><td>FFTサイズ</td><td>
              <select x-model="fftSize">
                <template x-for="opt in FftSizeOptions" :key="opt">
                  <option :value="opt" x-text="opt" :selected="fftSize==opt"></option>
                </template>
              </select>
            </td></tr>

            <tr><td>スムージング</td><td>
              <input x-model="smoothing" type="range" min="0" max="1.0" step="0.1" />
              <span x-text="smoothing" style="display:inline-block; width:30px"></span>
            </td></tr>
          </tbody>
        </table>
      </div>

      <canvas id="mycanvas" class="mycanvas"></canvas>

      <div>
        <audio id="audio-player" controls preload="auto" style="width:100%"></audio>
      </div>

      <div>
        <input id="song-file" type="file" style="width:100%"
               @change="onFileChange(Object.values($event.target.files))" />
      </div>
    </div>
  </body>
</html>
